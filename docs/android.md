# OpenDDS and Android

## Building OpenDDS for Android

Building OpenDDS for Android requires the [Android Native Development Kit
(NDK)](https://developer.android.com/ndk/). As Android targets multiple
architectures and has many versions, an architecture and minimum API version to
use will have to be decided. As of writing [this page lists Android version
numbers and their corresponding API
versions.](https://source.android.com/setup/start/build-numbers)

In all the recent NDKs (as of r18b), a toolchain can be generated by using
`build/tools/make_standalone_toolchain.py` Python script.

*NOTE: These examples are for Unix shell and assume $NDK is the location of the
unarchived NDK, $TOOLCHAIN is set to the location of the toolchain, and
$DDS_ROOT is the location of OpenDDS.*

For example, to create a toolchain for 32-bit ARM Android 7.0 "Nougat" and
later:

```
$NDK/build/tools/make_standalone_toolchain.py --arch arm --api 24 --install-dir $TOOLCHAIN
```

Once a toolchain is obtained, OpenDDS can be configured using
`--target=android` with the OpenDDS configure script. For example:

```
cd $DDS_ROOT
export PATH=$PATH:$TOOLCHAIN/bin
./configure --no-tests --target=android
make
```

### OpenDDS's Optional Dependencies

#### Java
**TODO**

#### OpenSSL

OpenSSL is required for OpenDDS Security. Fortunately it comes with a
configuration for android, please read `NOTES.ANDROID` for more information.

NOTE: As of OpenSSL 1.1.1, the script for Android requires the NDK itself, not
a standalone toolchain generated from the NDK. Specifically it requires
`$ANDROID_NDK` to be set to the location of the NDK and the toolchain (not the
target specific toolchain) be added to `$PATH`. For example this would be
`$ANDROID_NDK/toolchains/llvm/prebuilt/linux-x86_64/bin` for x86\_64 Linux host
for NDK r18.

#### Xerces

Xerces is also required for OpenDDS Security. Unfortunately it is not support
Android specifically but will probably build after some coaxing. In the authors
case it required modifying Xerces' configure script to skip checking for
`wcsrtombs()` and assume it was there.

## Using OpenDDS with C++ on Android
**TODO**

## Using OpenDDS with Java on Android
**TODO**

## Running Tests
**TODO**
